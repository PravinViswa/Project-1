<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Age Calculator</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f8ff;
      color: #333;
      text-align: center;
      padding: 50px 20px;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
    }
    input[type="date"] {
      padding: 10px;
      font-size: 16px;
      border: 1px solid #aaa;
      border-radius: 5px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 15px;
      background-color: #28a745;
      border: none;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #218838;
    }
    #result {
      margin-top: 30px;
      font-size: 1.2rem;
    }
    .fun-text {
      font-style: italic;
      color: #666;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>ðŸ§® Age Calculator</h1>
  <p>Pick your birthdate and let the magic unfold:</p>
  <input type="date" id="dob" />
  <br />
  <button onclick="calculateAge()">Calculate</button>

  <div id="result">ðŸ‘¶ Pick your birthdate to see how long youâ€™ve been rocking this reality!</div>
  <p class="fun-text" id="funnyLine"></p>

  <script>
    let ageData = null;
    let interval;

    function calculateAge() {
      const dob = document.getElementById("dob").value;
      if (!dob) {
        alert("Oops! You gotta pick a date before I can blow your mind ðŸ¤¯");
        return;
      }

      document.getElementById("result").innerText = "ðŸ” Crunching the numbers... hang tight!";
      document.getElementById("funnyLine").innerText = "";

      fetch(`https://project-1-ifvd.onrender.com/calculate-age?dob=${dob}`)
        .then(res => res.json())
        .then(data => {
          if (data.error) {
            document.getElementById("result").innerText = "ðŸ˜µ Invalid date format. Try again!";
          } else {
            ageData = {
              birthDate: new Date(dob),
              ...data
            };
            if (interval) clearInterval(interval);
            updateAgeLive();
            interval = setInterval(updateAgeLive, 1000);

            document.getElementById("funnyLine").innerText =
              "ðŸ§  Thatâ€™s a whole lotta time spent dodging responsibilities and powering through Mondays!";
          }
        })
        .catch(err => {
          document.getElementById("result").innerText = "ðŸ˜µ Uh-oh! Something broke. Try again later.";
          console.error(err);
        });
    }

    function updateAgeLive() {
      if (!ageData || !ageData.birthDate) return;

      const now = new Date();
      const diff = now - new Date(ageData.birthDate);
      const seconds = Math.floor(diff / 1000);
      const minutes = Math.floor(seconds / 60);
      const hours = Math.floor(minutes / 60);
      const days = Math.floor(hours / 24);
      const months = ageData.months;
      const years = ageData.years;

      const liveSeconds = seconds % 60;
      const liveMinutes = minutes % 60;
      const liveHours = hours % 24;

      document.getElementById("result").innerHTML =
        `ðŸŽ‰ Youâ€™ve survived <strong>${years}</strong> years, <strong>${months}</strong> months, 
        <strong>${days % 30}</strong> days, <strong>${liveHours}</strong> hours, 
        <strong>${liveMinutes}</strong> minutes, <strong>${liveSeconds}</strong> seconds!`;
    }
  </script>
</body>
</html>
